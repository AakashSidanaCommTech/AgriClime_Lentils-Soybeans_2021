@isTest(SEEALLDATA = true)
public class Test_WebsiteAccountHandler {
    
     static TestMethod void testWebsiteAccount(){
        wint__Website_Account__c winTest = new wint__Website_Account__c();
        winTest.wint__Website__c = 'agriclime.ca';
        winTest.wint__Email__c = '52d9b0c5-576f-48ca-9ab1-64020bb9b991@agriclime.ca';
        winTest.wint__Any__c = '{"purchaseSummaryList":[{"totalAmount":1043.01,"quantityUoM":"L","quantity":4.76,"priceCurrency":"CAD","price":219.12,"productBusiness":"SE","productLabel":"VibranceMaxx RFC ","productCode":"VibranceMaxx RFC "},{"totalAmount":5933.21,"quantityUoM":"L","quantity":22.005,"priceCurrency":"CAD","price":269.63,"productBusiness":"SE","productLabel":"VibranceMaxx Intego","productCode":"VibranceMaxx Intego"},{"totalAmount":18241.12,"quantityUoM":"L","quantity":34.425,"priceCurrency":"CAD","price":529.88,"productBusiness":"CP","productLabel":"Elatus","productCode":"Elatus"}],"sendEmail":false,"farms":[{"riskPeriodList":[{"measurement":-1.0,"indexValues":{"maxPayoutPercent":30.0,"notional":1.20743775,"layer":24.846,"exitDisplay":"21.454","exit":21.4539986,"triggerDisplay":"46.300","trigger":46.3},"peril":"PRECIPITATION","type":"CUMULATIVE_DAILY","option":"PUT","duration":35,"start":"2021-06-27","indexFunction":"Drought Protection Choice 2","id":{"agriclime":"84c107bb-e48d-4fb9-afd8-5fc80bbf4bbf"}}],"purchaseList":[{"totalAmount":14485.5,"quantityUoM":"mL","quantity":27337.5,"priceCurrency":"CAD","price":0.52987654,"productBusiness":"CP","productLabel":"Elatus","productCode":"Elatus"},{"totalAmount":5933.25,"quantityUoM":"mL","quantity":22005.0,"priceCurrency":"CAD","price":0.2696319,"productBusiness":"SE","productLabel":"VibranceMaxx Intego","productCode":"VibranceMaxx Intego"}],"optionTitle":"","totalMaxPayoutPercent":30.0,"crops":[],"gridCell":{"location":{"lng":-114.07201,"lat":50.925}},"weatherGuarantee":"This guarantee pays out a fix amount of 1.2 % per mm, if the rainfall during the selected guarantee period is below 46.3mm, up to a maximum payout of 30 % of the qualifying AgriClime purchases, if the rainfall is at or below 21.454 mm. ","currency":"CAD","actualCashback":0.0,"potentialCashback":6125.624961524999,"committedAreaUoM":"ACRE","committedArea":675.0,"committedSpend":20418.74987175,"address":{"city":"","location":{"dms":"","lng":-114.06281,"lat":50.94891},"street":"","stateCode":"","countryCode":"","postalCode":""},"name":"First Test - 1","id":{"agriclime":"6697006e-f2cc-40c7-9607-cca1955d465d"}},{"riskPeriodList":[{"measurement":-1.0,"indexValues":{"maxPayoutPercent":30.0000019,"notional":1.01467907,"layer":29.566,"exitDisplay":"23.409","exit":23.4089985,"triggerDisplay":"52.975","trigger":52.975},"peril":"PRECIPITATION","type":"CUMULATIVE_DAILY","option":"PUT","duration":35,"start":"2021-06-27","indexFunction":"Drought Protection Choice 2","id":{"agriclime":"35a573ab-dd01-4fb2-a227-26d9282e4f97"}}],"purchaseList":[{"totalAmount":3755.5,"quantityUoM":"mL","quantity":7087.5,"priceCurrency":"CAD","price":0.52987654,"productBusiness":"CP","productLabel":"Elatus","productCode":"Elatus"},{"totalAmount":1043.0,"quantityUoM":"mL","quantity":4760.0,"priceCurrency":"CAD","price":0.21911765,"productBusiness":"SE","productLabel":"VibranceMaxx RFC ","productCode":"VibranceMaxx RFC "}],"optionTitle":"","totalMaxPayoutPercent":30.0,"crops":[],"gridCell":{"location":{"lng":-114.07201,"lat":50.99775}},"weatherGuarantee":"This guarantee pays out a fix amount of 1.01 % per mm, if the rainfall during the selected guarantee period is below 52.975mm, up to a maximum payout of 30 % of the qualifying AgriClime purchases, if the rainfall is at or below 23.409 mm. ","currency":"CAD","actualCashback":0.0,"potentialCashback":1439.5500885464999,"committedAreaUoM":"ACRE","committedArea":175.0,"committedSpend":4798.49999125,"address":{"city":"","location":{"dms":"","lng":-114.07379,"lat":50.99561},"street":"","stateCode":"","countryCode":"","postalCode":""},"name":"Second Test Field","id":{"agriclime":"2a1f27ce-0aa1-4318-a58f-e421d29ffb2d"}}],"campaign":{"season":"2021","status":"ACTIVE","countryCode":"CA","title":"Canada_Lentil_2021","id":{"external":"CanadaLentil2021","agriclime":"1de93c28-fb69-4573-a884-93d4eba7b484"}},"partners":{"salesManager":{"extra":{},"address":{"city":"","location":{},"street":"","stateCode":"","countryCode":"","postalCode":""},"email":"sidana.aakash@gmail.com","lastName":"Sidana","firstName":"Aakash"},"advisor":{"extra":{"sfdcContactId":""},"address":{"city":"","location":{},"street":"","stateCode":"","countryCode":"","postalCode":""},"mobilePhone":"","position":"","company":"","email":"","lastName":"","middleName":"","firstName":""},"grower":{"extra":{"cashbackRecipient":"","iban":"","growerLicenseNumber":"","entrepreneurLicenseNumber":"","managingDirector":"","cmdId":"","sfdcCompanyId":"","sfdcContactId":"","taxNumber":"","companyRegistrationNumber":"","cuit":""},"address":{"city":"","location":{},"street":"","stateCode":"","countryCode":"CA","postalCode":""},"mobilePhone":"4377786032","position":"","company":"Global Canada Test","email":"testaakashtestsidana@gmail.com","lastName":"TestSidana","middleName":"","firstName":"TestAakash","id":{"agriclime":"e2960ca3-d5a0-44c5-82e6-a4b71797eee9"}}},"lastModifiedDate":"2021-03-04T15:14:42","createdDate":"2021-03-02T14:31:05","deleted":true,"type":"GROWER","proofStatus":"OPEN","status":"NEW","id":{"external":"CA-2021-5DCUZXB7","agriclime":"d6408e20-820f-4d00-91d8-42478c68f4a6"}}';
        System.debug('Test Data is' +winTest);
        Test.startTest();
        insert winTest;
        winTest = [Select Id, wint__Any__c  FROM wint__Website_Account__c WHERE Id =: 'a263m000006gOdi' LIMIT 1];
        winTest.wint__Any__c = '{"purchaseSummaryList":[{"totalAmount":0.0,"quantityUoM":"L","quantity":2720000.0,"priceCurrency":"CAD","price":0.0,"productBusiness":"SE","productLabel":"VibranceMaxx RFC ","productCode":"VibranceMaxx RFC "},{"totalAmount":0.0,"quantityUoM":"L","quantity":5.928E+7,"priceCurrency":"CAD","price":0.0,"productBusiness":"SE","productLabel":"VibranceMaxx RTA","productCode":"VibranceMaxx RTA"},{"totalAmount":0.0,"quantityUoM":"L","quantity":3.0375E+7,"priceCurrency":"CAD","price":0.0,"productBusiness":"CP","productLabel":"Elatus","productCode":"Elatus"}],"sendEmail":false,"farms":[{"riskPeriodList":[{"measurement":-1.0,"indexValues":{"maxPayoutPercent":29.9999981,"notional":1.26163328,"layer":23.7787,"exitDisplay":"30.572","exit":30.5712986,"triggerDisplay":"54.350","trigger":54.35},"peril":"PRECIPITATION","type":"CUMULATIVE_DAILY","option":"PUT","duration":35,"start":"2021-06-20","indexFunction":"Drought Protection Choice 1","id":{"agriclime":"0792e1fe-8d72-4794-aeca-910d5b54c2d4"}}],"purchaseList":[{"totalAmount":13949.0,"quantityUoM":"mL","quantity":26325.0,"priceCurrency":"CAD","price":0.52987654,"productBusiness":"CP","productLabel":"Elatus","productCode":"Elatus"},{"totalAmount":3874.0,"quantityUoM":"mL","quantity":59280.0,"priceCurrency":"CAD","price":0.06535088,"productBusiness":"SE","productLabel":"VibranceMaxx RTA","productCode":"VibranceMaxx RTA"}],"optionTitle":"","totalMaxPayoutPercent":30.0,"crops":[],"gridCell":{"location":{"lng":-114.07201,"lat":51.0705}},"weatherGuarantee":"This guarantee pays out a fix amount of 1.26 % per mm, if the rainfall during the selected guarantee period is below 54.35mm, up to a maximum payout of 30 % of the qualifying AgriClime purchases, if the rainfall is at or below 30.572 mm. ","currency":"CAD","actualCashback":0.0,"potentialCashback":5346.899685932997,"committedAreaUoM":"ACRE","committedArea":650.0,"committedSpend":17823.000081899998,"address":{"city":"","location":{"dms":"","lng":-114.06301,"lat":51.04533},"street":"","stateCode":"","countryCode":"","postalCode":""},"name":"Test - 1","id":{"agriclime":"3213a73f-a587-492b-9c08-a4b548e48965"}},{"riskPeriodList":[{"measurement":-1.0,"indexValues":{"maxPayoutPercent":30.0000019,"notional":0.82607764,"layer":36.3162,"exitDisplay":"22.109","exit":22.108799,"triggerDisplay":"58.425","trigger":58.425},"peril":"PRECIPITATION","type":"CUMULATIVE_DAILY","option":"PUT","duration":35,"start":"2021-06-20","indexFunction":"Drought Protection Choice 1","id":{"agriclime":"13fa4cf8-6f63-4641-8096-f28211bc4cdd"}}],"purchaseList":[{"totalAmount":2146.0,"quantityUoM":"mL","quantity":4059.0,"priceCurrency":"CAD","price":0.52987654,"productBusiness":"CP","productLabel":"Elatus","productCode":"Elatus"},{"totalAmount":596.0,"quantityUoM":"mL","quantity":2720.0,"priceCurrency":"CAD","price":0.21911765,"productBusiness":"SE","productLabel":"VibranceMaxx RFC ","productCode":"VibranceMaxx RFC "}],"optionTitle":"","totalMaxPayoutPercent":30.0,"crops":[],"gridCell":{"location":{"lng":-114.07201,"lat":50.99775}},"weatherGuarantee":"This guarantee pays out a fix amount of 0.82 % per mm, if the rainfall during the selected guarantee period is below 58.425mm, up to a maximum payout of 30 % of the qualifying AgriClime purchases, if the rainfall is at or below 22.109 mm. ","currency":"CAD","actualCashback":0.0,"potentialCashback":822.6000505979998,"committedAreaUoM":"ACRE","committedArea":100.0,"committedSpend":2741.9999949999997,"address":{"city":"","location":{"dms":"","lng":-114.0683,"lat":50.99215},"street":"","stateCode":"","countryCode":"","postalCode":""},"name":"Test -  2","id":{"agriclime":"daf04bdd-abe6-4fcf-ae72-8da88a098877"}}],"campaign":{"season":"2021","status":"DRAFT","countryCode":"CA","title":"Canada_Lentil_2021","id":{"external":"CanadaLentil2021","agriclime":"1de93c28-fb69-4573-a884-93d4eba7b484"}},"partners":{"salesManager":{"extra":{},"address":{"city":"","location":{},"street":"","stateCode":"","countryCode":"","postalCode":""},"email":"sidana.aakash@gmail.com","lastName":"Sidana","firstName":"Aakash"},"advisor":{"extra":{"sfdcContactId":""},"address":{"city":"","location":{},"street":"","stateCode":"","countryCode":"","postalCode":""},"mobilePhone":"","position":"","company":"","email":"","lastName":"","middleName":"","firstName":""},"grower":{"extra":{"cashbackRecipient":"","iban":"","growerLicenseNumber":"","entrepreneurLicenseNumber":"","managingDirector":"","cmdId":"","sfdcCompanyId":"","sfdcContactId":"","taxNumber":"","companyRegistrationNumber":"","cuit":""},"address":{"city":"","location":{},"street":"","stateCode":"","countryCode":"CA","postalCode":""},"mobilePhone":"4377786032","position":"","company":"Global Canada Test","email":"testaakashtestsidana@gmail.com","lastName":"TestSidana","middleName":"","firstName":"TestAakash","id":{"agriclime":"f9006fc7-4412-4645-91d4-7f2f8179e750"}}},"lastModifiedDate":"2021-03-02T14:44:10","createdDate":"2021-03-02T14:44:10","deleted":false,"type":"GROWER","proofStatus":"OPEN","status":"NEW","id":{"external":"CA-2021-K2Q5Y72P","agriclime":"68deb048-d7e1-4ccc-a504-118b2e071ed2"}}';
        
        //update winTest;
        Test.stopTest();
             
    }
    static testMethod void testJson(){
        //wint__Website_Account__c winTest =[Select id,wint__Any__c FROM wint__Website_Account__c LIMIT 1];
        wint__Website_Account__c winTest = new wint__Website_Account__c();
        winTest.wint__Website__c = 'agriclime.ca';
        winTest.wint__Email__c = 'testaakashtestsidana@gmail.com';
        winTest.wint__Any__c = '{"purchaseSummaryList":[{"totalAmount":1485.48,"quantityUoM":"UN","quantity":6063.2,"priceCurrency":"CAD","price":0.245,"productBusiness":"SE","productLabel":"CruiserMaxx Vibrance beans ","productCode":"CruiserMaxx Vibrance beans "},{"totalAmount":8794.5,"quantityUoM":"UN","quantity":143.0,"priceCurrency":"CAD","price":61.5,"productBusiness":"SE","productLabel":"S0009-F2X ","productCode":"S0009-F2X "}],"sendEmail":false,"farms":[{"riskPeriodList":[{"measurement":-1.0,"indexValues":{"maxPayoutPercent":20.0,"notional":0.467515826,"layer":42.7793,"exitDisplay":"1.071","exit":1.07069778,"triggerDisplay":"43.850","trigger":43.85},"peril":"PRECIPITATION","type":"CUMULATIVE_DAILY","option":"PUT","duration":43,"start":"2021-07-20","indexFunction":"Drought:","id":{"agriclime":"61eb323f-6452-42ad-b321-10cfa8ca92bf"}}],"purchaseList":[{"totalAmount":1485.48,"quantityUoM":"UN","quantity":6063.2,"priceCurrency":"CAD","price":0.245,"productBusiness":"SE","productLabel":"CruiserMaxx Vibrance beans ","productCode":"CruiserMaxx Vibrance beans "},{"totalAmount":8794.5,"quantityUoM":"UN","quantity":143.0,"priceCurrency":"CAD","price":61.5,"productBusiness":"SE","productLabel":"S0009-F2X ","productCode":"S0009-F2X "}],"optionTitle":"Saskatchewan offer:","totalMaxPayoutPercent":20.0,"crops":[],"gridCell":{"location":{"lng":-104.6145,"lat":50.41575}},"weatherGuarantee":"This guarantee pays out a fix amount of 0.46% per mm, if the rainfall during the selected guarantee period is below 43.85mm, up to a maximum payout of 20% of the qualifying AgriClime purchases, if the rainfall is at or below 1.071mm. ","currency":"CAD","actualCashback":0.0,"potentialCashback":2055.9968,"committedAreaUoM":"ACRE","committedArea":110.0,"committedSpend":10279.984,"address":{"city":"","location":{"dms":"","lng":-104.59517,"lat":50.44826},"street":"","stateCode":"","countryCode":"","postalCode":""},"name":"Test - 1","id":{"agriclime":"9e46111a-6264-4981-9cfa-fbd78baf988d"}}],"campaign":{"season":"2021","status":"ACTIVE","countryCode":"CA","title":"Canada_Soy_Saskatchewan_2021","id":{"external":"CanadaSoySaskatchewan2021","agriclime":"bb565d3d-ad30-413e-9c77-6f45f75845b9"}},"partners":{"salesManager":{"extra":{},"address":{"city":"","location":{},"street":"","stateCode":"","countryCode":"","postalCode":""},"email":"heather.baron@syngenta.com","lastName":"Baron","firstName":"Heather"},"advisor":{"extra":{"sfdcContactId":""},"address":{"city":"","location":{},"street":"","stateCode":"","countryCode":"","postalCode":""},"mobilePhone":"","position":"","company":"","email":"","lastName":"","middleName":"","firstName":""},"grower":{"extra":{"cashbackRecipient":"","iban":"","growerLicenseNumber":"","entrepreneurLicenseNumber":"","managingDirector":"","cmdId":"","sfdcCompanyId":"","sfdcContactId":"","taxNumber":"","companyRegistrationNumber":"","cuit":""},"address":{"city":"","location":{},"street":"","stateCode":"","countryCode":"CA","postalCode":""},"mobilePhone":"4377786032","position":"","company":"Global Syngenta Test","email":"testaakashtestsidana@gmail.com","lastName":"TestSidana","middleName":"","firstName":"TestAakash","id":{"agriclime":"6c880f0a-6e74-4ae3-8a2c-1c339c32244d"}}},"lastModifiedDate":"2021-03-02T14:14:58","createdDate":"2021-03-02T14:14:58","deleted":false,"type":"GROWER","proofStatus":"OPEN","status":"NEW","id":{"external":"CA-2021-6YSWS27F","agriclime":"52d9b0c5-576f-48ca-9ab1-64020bb9b991"}}';
        System.debug('Test Data is' +winTest);
        Insert winTest;
        winTest = [Select Id, wint__Any__c  FROM wint__Website_Account__c WHERE Id =: 'a263m000006gM7u' LIMIT 1];
        String json = winTest.wint__Any__c;
        FarmWrapper obj = Farmwrapper.parse(json);
		System.assert(obj != null);
        
    }

}